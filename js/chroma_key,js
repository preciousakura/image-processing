let image_chromaK;

const loadChromaKeyImage = (event) => {
  if(orchestrator) {
    if (event.target.files.length > 0) {
      const img = new Image();
      img.src = URL.createObjectURL(event.target.files[0]);
  
      img.addEventListener("load", () => {
        let width = canvas_img.width;
        let height = (width / img.width) * img.height;
  
        const canvas = document.createElement("canvas");
        const context = canvas.getContext("2d");
        canvas.width = width;
        canvas.height = height;
        context.drawImage(img, 0, 0, width, height);
  
        const data_image = context.getImageData(0, 0, width, height);
        chromaKeyApply(new image(data_image.data, width, height));
        img.style.display = "none";
  
        canvas.remove();
      });
    }
  }
};

function chromaKeyApply(bgImage) {
  orchestrator.chromaKey(bgImage, new pixel(0, 255 / 255, 1 / 255, 1));
}
