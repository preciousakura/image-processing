<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>image processing</title>
    <script src="https://cdn.jsdelivr.net/gh/nicolaspanel/numjs@0.15.1/dist/numjs.min.js"></script>
    <link rel="stylesheet" href="style/style.css" />
    <link rel="stylesheet" href="style/piecewise_linear.css" />
    <link rel="stylesheet" href="style/histogram.css" />
    <link rel="stylesheet" href="style/menu.css" />
    <link rel="stylesheet" href="style/transformations.css" />
    <link rel="stylesheet" href="style/steganography.css" />
    <link rel="stylesheet" href="style/eraser.css" />
  </head>

  <body>
    <main>
      <nav>
        <ul>
          <li class="archive">
            <a>File</a>
            <div class="submenu">
              <div>
                <label for="archive"><a>Open</a></label>
                <input
                  id="archive"
                  name="archive"
                  type="file"
                  accept="image/*"
                  onchange="loadImage(event)"
                />
              </div>
              <div onclick="saveImage()"><a id="save">Save</a></div>
            </div>
          </li>
          <li class="transform">
            <a>Transformations</a>
            <div class="submenu">
              <div id="histogramEqualizationButton">
                <a>Histogram Equalization</a>
              </div>
              <div onclick="openModal('piecewise')">
                <a>Piecewise Linear</a>
              </div>
              <div id="toGrayButton"><a>Gray Scale Arithmetic</a></div>
              <div id="toGrayButtonW"><a>Gray Scale Weigthed</a></div>
              <div id="normalizeButton"><a>Normalize</a></div>
              <div id="negativeButton"><a>Negative</a></div>
              <div onclick="openModal('gamma')"><a>Gamma</a></div>
              <div onclick="openModal('log')"><a>Log</a></div>
              <div onclick="openModal('treshold')"><a>Treshold</a></div>
              <div onclick="fftApply()"><a>FFT2</a></div>
              <div>
                <label for="chromakey"><a>Chroma key</a></label>
                <input
                  id="chromakey"
                  name="archive"
                  type="file"
                  accept="image/*"
                  onchange="loadChromaKeyImage(event)"
                />
              </div>
            </div>
          </li>
          <li class="geometric_transform">
            <a>Geometric Transformations</a>
            <div class="submenu">
              <div onclick="openModal('scale_none')"><a>Scale None</a></div>
              <div onclick="openModal('scale_linear')"><a>Scale Linear</a></div>
              <div onclick="openModal('rotation_none')"><a>Rotation None</a></div>
              <div onclick="openModal('rotation_linear')"><a>Rotation Linear</a></div>
            </div>
          </li>
          <li class="filter">
            <a>Filters</a>
            <div class="submenu">
              <div onclick="openModal('gaussian')"><a>Gaussian</a></div>
              <div onclick="openModal('mean')"><a>Mean</a></div>
              <div onclick="openModal('median')"><a>Median</a></div>
              <div onclick="applySobel()"><a>Sobel</a></div>
              <div onclick="applyLaplacian()"><a>Laplacian</a></div>
              <div onclick="openModal('highboost')"><a>High-Boost</a></div>
              <div onclick="openModal('kernel')"><a>Kernel Free</a></div>
            </div>
          </li>
          <li><a onclick="openModal('steganography')">Steganography</a></li>
          <li>
            <a onclick="if(orchestrator) orchestrator.showNormalized()"
              >Show Normalized</a
            >
          </li>
          <li>
            <a onclick="if(orchestrator) orchestrator.showNotNormalized()"
              >Show Not Normalized</a
            >
          </li>
          <li><a onclick="undo()">Undo changes</a></li>
        </ul>
      </nav>

      <section>
        <div class="content left">
          <div class="modal" id="erasermodal">
            <div class="pincels">
              <canvas id="eraser_pincel" width="400" height="400"></canvas>
              <canvas id="eraser" width="400" height="400"></canvas>
            </div>
            <div class="options">
              <div class="options_pencil">
                <label><input type="radio" name="typepencil" value="rough" checked onchange="onChangePencilType(event.target.value)"/>rough pencil</label>
                <label><input type="radio" name="typepencil" value="smooth" onchange="onChangePencilType(event.target.value)"/>smooth pencil</label>
              </div>

              <div class="values">
                <label>
                  radius:
                  <input
                    type="number"
                    onchange="changeRadius(event.target.value)"
                  />
                </label>

                <label>
                  color:
                  <input
                    disabled
                    class="smoothoption"
                    type="number"
                    max="1"
                    min="0"
                    step="0.1"
                    onchange="onChangePencilColor(event.target.value)"
                  />
                </label>

                <label>
                  sigma:
                  <input
                    disabled
                    class="smoothoption"
                    type="number"
                    onchange="changeRadius(event.target.value)"
                  />
                </label>
              </div>

              <div>
                <button onclick="applyInverseFft()">apply inverse fft2</button>
                <button onclick="closeModal()">cancel</button>
              </div>
            </div>
          </div>
          <div class="modal" id="piecewise">
            <div>
              <div id="axis-x"></div>
              <canvas
                id="piecewise-linear-window"
                width="392"
                height="392"
              ></canvas>
              <div id="axis-y"></div>
            </div>

            <div class="options">
              <label><input type="checkbox" name="scale" id="scale_check" onchange="changeColorType(event.target.checked)" checked/>gray scale</label>

              <div class="filters">
                <label><input disabled type="radio" name="rgb" value="red" checked onchange="changeChannel(event.target.value)"/>R</label>
                <label><input disabled type="radio" name="rgb" value="green" onchange="changeChannel(event.target.value)" />G</label>
                <label><input disabled type="radio" name="rgb" value="blue" onchange="changeChannel(event.target.value)"/>B</label>
              </div>
              <div>
                <label>
                  x:
                  <input
                    id="valueX"
                    type="number"
                    onchange="changeX(event.target.value)"
                  />
                </label>
                <label>
                  y:
                  <input
                    id="valueY"
                    type="number"
                    onchange="changeY(event.target.value)"
                  />
                </label>
                <button onclick="addcircle()">add circle</button>
                <button onclick="deselect()">unselect circle</button>
              </div>
              <div>
                <button id="applyPiecewise">apply changes</button>
                <button onclick="closePiecewise()">cancel</button>
              </div>
            </div>
          </div>
          <div class="modal" id="steganography" open>
            <label for="ste">
              Steganography
              <textarea id="steganographyText" rows="4" cols="50"></textarea>
            </label>
            <div class="options">
              <div>
                <button id="steganographyEncryptButton">encrypt</button>
                <button id="steganographyDecryptButton">decrypt</button>
              </div>
              <button onclick="closeModal()">cancel</button>
            </div>
          </div>

          <div class="modal input" id="gamma" open>
            <label>
              gamma:
              <input
                type="number"
                max="100"
                min="-100"
                step=".15"
                id="cGamma"
                value="1"
              />
              <input
                type="number"
                max="100"
                min="-100"
                step=".15"
                id="expGamma"
                value="1"
              />
            </label>
            <button type="button" onclick="orchestrator.do()">
              apply changes
            </button>
            <button onclick="closeModal()">cancel</button>
          </div>

          <div class="modal input" id="log" open>
            <label>
              log:
              <input
                type="number"
                max="100"
                min="-100"
                step=".15"
                id="cLog"
                value="1"
              />
            </label>
            <button type="button" onclick="orchestrator.do()">
              apply changes
            </button>
            <button onclick="closeModal()">cancel</button>
          </div>

          <div class="modal input" id="treshold" open>
            treshold no intervalo [0, 255], intensidade = intensidade > treshold
            ? 0 : 255
            <label>
              treshold:
              <input
                type="number"
                max="100"
                min="-100"
                step=".15"
                id="tresholdValue"
                value="0"
              />
            </label>
            <button type="button" onclick="orchestrator.do()">
              apply changes
            </button>
            <button onclick="closeModal()">cancel</button>
          </div>

          <div class="modal input" id="gaussian" open>
            <label>
              kernell_dimension:
              <input
                type="number"
                max="3"
                min="99"
                step="2"
                id="dimensionGauss"
                value="3"
              />
              sigma:
              <input
                type="number"
                max="0"
                min="100"
                step="1.5"
                id="sigmaGauss"
                value="1.5"
              />
            </label>
            <button type="button" id="applyGaussianButton">
              Apply Guassian Filter
            </button>
            <button onclick="closeModal()">cancel</button>
          </div>

          <div class="modal input" id="mean" open>
            <label>
              kernell_dimension:
              <input
                type="number"
                max="3"
                min="99"
                step="2"
                id="dimensionMean"
                value="3"
              />
            </label>
            <button type="button" id="applyMeanButton">
              Apply Mean Filter
            </button>
            <button onclick="closeModal()">cancel</button>
          </div>

          <div class="modal input" id="median" open>
            <label>
              kernell_dimension:
              <input
                type="number"
                max="3"
                min="99"
                step="2"
                id="dimensionMedian"
                value="3"
              />
            </label>
            <button type="button" id="applyMedianButton">
              Apply Median Filter
            </button>
            <button onclick="closeModal()">cancel</button>
          </div>

          <div class="modal input" id="highboost" open>
            highboost = img + k*img_blur
            <label>
              gaussian kernell dimension:
              <input
                type="number"
                max="3"
                min="99"
                step="2"
                id="dimensionHigh"
                value="3"
              />
              sigma:
              <input
                type="number"
                max="3"
                min="99"
                step="2"
                id="sigmaHigh"
                value="1.5"
              />
              k:
              <input type="number" id="kHigh" value="1.2" />
            </label>
            <button type="button" onclick="applyHighBoost()">
              Apply High-Boost
            </button>
            <button onclick="closeModal()">cancel</button>
          </div>

          <div class="modal input" id="kernel" open>
            <label>
              Type Kernel:
              <textarea id="kernelText" rows="4" cols="50">
[[0, 0.125, 0], [0.125, 0.5, 0.125], [0, 0.125, 0]]</textarea
              >
            </label>
            <button id="kernelTextButton">Apply Kernel</button>
            <button onclick="closeModal()">cancel</button>
          </div>

          <div class="modal input" id="scale_none" open>
            <label>
              scale width:
              <input
                type="number"
                id="scaleWN"
                value="1"
              />
              scale heigth:
              <input
                type="number"
                id="scaleHN"
                value="1"
              />
            </label>
            <button type="button" id="scaleNoneButton">
              Apply Scale None
            </button>
            <button onclick="closeModal()">cancel</button>
          </div>

          <div class="modal input" id="scale_linear" open>
            <label>
              scale width:
              <input
                type="number"
                id="scaleWL"
                value="1"
              />
              scale heigth:
              <input
                type="number"
                id="scaleHL"
                value="1"
              />
            </label>
            <button type="button" id="scaleLinearButton">
              Apply Scale Linear
            </button>
            <button onclick="closeModal()">cancel</button>
          </div>

          <div class="modal input" id="rotation_none" open>
            <label>
              angle in degrees:
              <input
                type="number"
                id="angleN"
                value="45"
              />
            </label>
            <button type="button" id="rotationNoneButton">
              Apply None Rotation
            </button>
            <button onclick="closeModal()">cancel</button>
          </div>

          <div class="modal input" id="rotation_linear" open>
            <label>
              angle in degrees:
              <input
                type="number"
                id="angleL"
                value="45"
              />
            </label>
            <button type="button" id="rotationLinearButton">
              Apply Linear Rotation
            </button>
            <button onclick="closeModal()">cancel</button>
          </div>

        </div>


        <div class="content middle">
          <canvas id="image" width="400" height="400"></canvas>
        </div>

        <div class="content right">
          <div id="histogram">
            <canvas id="histogram-window" width="400" height="300"></canvas>
            <div class="options">
              <label><input type="radio" name="rgb_histogram" value="red" onchange="changeHistogram(event.target.value)"/>Red</label>
              <label><input type="radio" name="rgb_histogram" value="green" onchange="changeHistogram(event.target.value)" />Green</label>
              <label><input type="radio" name="rgb_histogram" value="blue" onchange="changeHistogram(event.target.value)"/>Blue</label>
              <label><input type="radio" name="rgb_histogram" value="intensity" onchange="changeHistogram(event.target.value)" checked/>I</label>
            </div>
          </div>
          <button class="expand" onclick="expandHistogram()">
            +
          </button>
        </div>
      </section>
    </main>
    <script src="js/canvas.js"></script>
    <script src="js/uploadImage.js"></script>
    <script src="js/piecewise_linear.js"></script>
    <script src="js/histogram.js"></script>
    <script src="js/transformations.js"></script>
    <script src="js/eraser.js"></script>

    <script src="js/pixel.js"></script>
    <script src="js/image.js"></script>
    <script src="js/imageOrchestrator.js"></script>
    <script src="js/inputHandlers.js"></script>
    <script src="js/filters.js"></script>

    <script src="js/complex_number.js"></script>
    <script src="js/naive_fft.js"></script>
    <script src="js/fft.js"></script>
    <script src="js/aux_fft.js"></script>

    <script src="js/interpolation.js"></script>
    <script src="js/chroma_key,js"></script>
  </body>
</html>
